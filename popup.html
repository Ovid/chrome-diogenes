<!DOCTYPE html>
<html>
<head>
  <title>Diogenes</title>
  <meta charset="UTF-8">
  <style>
.container {
  width: 300px;
  padding: 16px;
  font-family: system-ui, -apple-system, sans-serif;
}

.section {
  margin-bottom: 16px;
}

.title {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 12px;
  color: #1a1a1a;
}

.form-group {
  margin-bottom: 12px;
}

.input {
  width: 100%;
  padding: 8px;
  border: 1px solid #ddd;
  border-radius: 4px;
  margin-bottom: 8px;
  font-size: 16px;
}

.button {
  background-color: #2563eb;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  width: 100%;
  margin-bottom: 8px;
}

.button:hover {
  background-color: #1d4ed8;
}

.button.secondary {
  background-color: #4b5563;
}

.button.secondary:hover {
  background-color: #374151;
}

.button.danger {
  background-color: #dc2626;
}

.button.danger:hover {
  background-color: #b91c1c;
}

.status {
  padding: 8px;
  border-radius: 4px;
  margin-top: 8px;
  display: none;
}

.status.error {
  background-color: #fee2e2;
  color: #dc2626;
}

.status.success {
  background-color: #dcfce7;
  color: #16a34a;
}

.nav-link {
  color: #2563eb;
  text-decoration: none;
  font-size: 14px;
  display: inline-block;
  margin-top: 12px;
  cursor: pointer;
}

.nav-link:hover {
  text-decoration: underline;
}

.help-section {
  display: none;
}

.help-text {
  font-size: 14px;
  line-height: 1.5;
  color: #374151;
}

.help-list {
  list-style: disc;
  padding-left: 20px;
  margin: 0;
}

.help-list li {
  margin-bottom: 12px;
}

.back-link {
  display: inline-block;
  color: #4b5563;
  text-decoration: none;
  font-size: 14px;
  margin-bottom: 16px;
  cursor: pointer;
  padding-left: 20px;
  position: relative;
}

.back-link:hover {
  color: #1f2937;
}

.back-link:before {
  content: "‚Üê";
  position: absolute;
  left: 0;
}

/* Hide sections by default */
#apiKeyForm, #mainContent {
  display: none;
}
  </style>
</head>
<body>
  <div class="container">
    <!-- Main Interface -->
    <div id="mainInterface">
      <div id="apiKeyForm" class="section">
        <div class="title">Enter Gemini API Key</div>
        <div class="form-group">
          <input type="password" id="apiKeyInput" class="input" placeholder="Enter API key">
          <button id="saveApiKey" class="button">Save API Key</button>
        </div>
      </div>

      <div id="mainContent" class="section">
        <div class="title">Diogenes Analysis</div>
        <div class="form-group">
          <button id="analyze" class="button">Analyze Page</button>
          <button id="replaceApiKey" class="button secondary">Replace API Key</button>
          <button id="deleteApiKey" class="button danger">Delete API Key</button>
        </div>
      </div>

      <div id="status" class="status"></div>
      
      <a class="nav-link" id="helpLink">Help & Instructions</a>
    </div>

    <div class="language-selector">
      <label for="languageSelect">Response Language:</label>
      <select id="languageSelect" class="language-select">
        <!-- 
            Multiple tries to get this to work have failed. Gemini ain't
            givin' me no love. I might revisit this by making two passses
            later. The first pass would be "what language is this in" and the
            second pass would be requesting the language.
            <option value="article">Article Language</option>
        -->
        <option value="en" selected>English</option>
        <option value="fr">French</option>
        <option value="es">Spanish</option>
        <option value="pt">Portuguese</option>
        <option value="it">Italian</option>
        <option value="de">German</option>
      </select>
    </div>

    <!-- Help Section -->
    <div id="helpSection" class="help-section">
      <a id="backToMain" class="back-link">Back to Main</a>
      
      <h2 class="title">How to Use Diogenes</h2>
      
      <ul class="help-list">
        <li>
          <b>Set up API Key:</b> Before first use, you'll need to enter your Gemini API key. You can get this from <a href="https://ai.google.dev/" target="_blank">Google AI Studio.</a> and clicking on the <a href="https://aistudio.google.com/app/apikey" target="_blank">Get API key in Google AI Studio</a> link. Note that this key is free to use, but there is a limit to how often you can use it. To increase your limit, on the "Get API key in Google AI Studio" page, click on the "Go to billing" link and follow the instructions.
        </li>
        
        <li>
          <b>Analyze Pages:</b> Once your API key is set, click "Analyze Page" on any webpage to examine its logical structure and argumentation.
        </li>
        
        <li>
          <b>View Results:</b> The analysis will appear in an overlay on the webpage, showing logical fallacies, factual claims, and overall argument strength.
        </li>
        
        <li>
          <b>Managing API Key:</b> You can replace or delete your API key at any time using the buttons in the main interface.
        </li>
        
        <li>
          <b>Note:</b> The analysis works best on articles, blog posts, and other text-heavy content that presents arguments or opinions.
        </li>

        <li>
          <b>Privacy:</b> Diogenes does not store any data from the pages you visit. The API key is stored locally on your device and is not shared with any third parties.
        </li>

        <li>
          <b>Code:</b> The source code for Diogenes is available on <a href="https://github.com/Ovid/chrome-diogenes" target="_blank">GitHub</a> and is released under <a href="https://github.com/Ovid/chrome-diogenes/blob/main/LICENSE.txt" target="_blank">the MIT License</a>.
        </li>
      </ul>
      <a id="backToMainBottom" class="back-link">Back to Main</a>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
